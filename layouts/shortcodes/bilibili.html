{{/* Source:  https://github.com/zhaohuabing/hugo-theme-cleanwhite/blob/5050d9e041422022d7c3e82fbca0e4ba1e173cc2/layouts/shortcodes/bilibili.html  */}}

{{ $videoID := index .Params 0 }}
{{ $pageNum := index .Params 1 | default 1}}

<style>
    #biliplayer {
      width: 100%;
      height: 500px;
    }
    @media only screen and (min-device-width: 320px) and (max-device-width: 480px) {
      #biliplayer {
        width: 100%;
        height: 250px;
      }
    }
</style>

{{ if (findRE "^[bB][vV][0-9a-zA-Z]+$" $videoID) }}
    <div>
        <iframe id="biliplayer" src="//player.bilibili.com/player.html?as_wide=1&high_quality=1&bvid={{ $videoID }}&page={{ $pageNum }}" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" loading="lazy" ></iframe>
    </div>
{{ else }}
    <div>
        <iframe id="biliplayer" src="//player.bilibili.com/player.html?as_wide=1&high_quality=1&aid={{ $videoID }}&page={{ $pageNum }}" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" loading="lazy" ></iframe>
    </div>
{{ end }}
